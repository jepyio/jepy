var jepy=function(){"use strict";class t{render(){}}const s=(t,s)=>t.includes(".")?t.split(".").reduce(((t,s)=>t?.[s]),s):s[t],e="$",r="%",n="@",i="{",c="}";return{Block:t,Composite:class extends t{#t;constructor(t){super(),this.#t=t}render(t){return this.#t.map((s=>s.render(t))).join("")}},Conditional:class extends t{#s;#e;#r;constructor(t,s,e){super(),this.#s=t,this.#e=s,this.#r=e}render(t){return this.#s(t)?this.#e.render(t):this.#r?this.#r.render(t):""}},Placeholder:class extends t{#n;#i;constructor(t,s){super(),this.#n=t,this.#i=s}render(i){let c=this.#n;return void 0!==this.#i&&(c=this.#c(c,n,(e=>{let r=s(e,this.#i);"function"==typeof r&&(r=r(i));return"object"==typeof r&&r instanceof t?r.render(i):r}))),i&&(c=this.#c(c,r,(t=>s(t,i))),c=this.#c(c,e,(t=>{const e=s(t,i);return"string"==typeof e?this.#o(e):e}))),c}#c(t,s,e){const r=new RegExp("\\"+s+"\\"+i+"(?<path>\\w+(?:\\.\\w+)*)\\"+c,"g"),n=t.matchAll(r);for(const s of n)t=t.replaceAll(s[0],e(s.groups.path));return t}#o(t){return t.replace(/([<>&]|[^#-~| |!])/g,(t=>"&#"+t.charCodeAt(0)+";")).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,(t=>"&#"+(1024*t.charCodeAt(0)+t.charCodeAt(1)-56613888)+";"))}},Repeating:class extends t{#h;#l;#a;constructor(t,s,e){super(),this.#h=t,this.#l=s,this.#a=e}render(t){return s(this.#h,t).map((s=>{const e=this.#a?this.#a(s,t):s;return this.#l.render(e)})).join("")}},Simple:class extends t{#n;constructor(t){super(),this.#n=t}render(){return this.#n}},Callback:class extends t{#u;constructor(t){super(),this.#u=t}render(t){return this.#u(t)}},Cached:class extends t{#d;#p;#k=null;constructor(t,s){super(),this.#d=t,this.#p=s||(()=>!0)}render(t){return null!==this.#k&&this.#p(t,this)||(this.#k=this.#d.render(t)),this.#k}}}}();