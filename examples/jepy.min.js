var jepy=function(){"use strict";class t{render(){}}class e extends t{#t;#e;#s;constructor(t,e,s){super(),this.#t=t,this.#e=e,this.#s=s}render(t){return this.#t(t)?this.#e.render(t):this.#s?this.#s.render(t):""}}const s=".",n=":",r=(t,e)=>t.includes(s)?t.split(s).reduce((t,e)=>t?.[e],e):e[t];class i extends t{#n;#r;#i;#c;constructor(t,e,s,n=""){super(),this.#n=t,this.#i=e,this.#c=s,this.#r=n}render(t){return r(this.#n,t).map(e=>(this.#r&&(e=Object.defineProperty({},this.#r,{value:e})),this.#c&&(e=this.#c(e,t)),this.#i.render(Object.assign(e,t)))).join("")}}class c extends t{#o;constructor(t){super(),this.#o=t}render(){return this.#o}}class o extends t{#h;#a;#l=null;constructor(t,e){super(),this.#h=t,this.#a=e||(()=>!0)}render(t){return null!==this.#l&&this.#a(t,this)||(this.#l=this.#h.render(t)),this.#l}}const h={SPACE:" ",TAB:"\t"};class a extends t{#u;#d;#p;constructor(t,e,s){super(),this.#u=t,this.#d=e,this.#p=s}render(t){const e=String().padStart(this.#p,this.#d),s=this.#u.render(t);return s.includes("\n")?e+s.replace(new RegExp("\\n","g"),"\n"+e):e+s}}const l="$",u="%",d={REPEATING:"#",CONDITIONAL:"?",TAB_INDENTED:">",SPACE_INDENTED:"_",CACHED:"="},p="{",b="}",w="!",k="@";class g{#o="";#b={};#w=!1;constructor(t,e={}){this.#o=t,this.#b=e}render(t={}){this.#w||this.#k();let e=this.#o;const n=(t,n)=>{const r=new RegExp("(?<indent>[ \\t]*)\\"+t+"\\"+p+"(?<path>\\"+k+"?\\w+(?:\\"+s+"(\\w|\\_\\-)+)*)\\"+b,"gm"),i=e.matchAll(r);for(const t of i){const s=n(t.groups.path);e=e.replaceAll(t[0],this.#g(s,t.groups.indent))}};return n(u,e=>this.#f(e,t)),n(l,e=>{const s=this.#f(e,t);return"string"==typeof s?this.#x(s):s}),e}#g(t,e){return e?"string"==typeof t&&t.includes("\n")?e+t.replace(new RegExp("\\n","g"),"\n"+e):e+t:t}#f(t,e){return t.startsWith(k)?this.#C(t,e):r(t,e)}#C(e,s){const n=e.slice(1);let i=r(n,this.#b);"function"==typeof i&&(i=i(s));return"object"==typeof i&&i instanceof t?i.render(s):i}#x(t){return t.replace(/([<>&]|[^#-~| |!])/g,t=>"&#"+t.charCodeAt(0)+";").replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,t=>"&#"+(1024*t.charCodeAt(0)+t.charCodeAt(1)-56613888)+";")}#k(){const t=Object.values(d).map(t=>"\\"+t),e=new RegExp("(?<prefix>["+t.join("")+"])\\"+p+"(?<operator>[\\"+w+"])?(?<placeholder>(?<name>\\"+k+"?\\w+(?:\\"+s+"\\w+)*)(?:\\"+n+"[\\w\\d]+)?)\\"+b+"(?<content>(.|\n)*?)\\k<prefix>\\"+p+"\\/\\k<name>\\"+b,"gm");let r=0,i=[],c={};for(;(i=Array.from(this.#o.matchAll(e))).length>0;){const t=i[0],e="block_"+r;r++;const s=u+p+k+e+b;this.#o=this.#o.replace(t[0],s),c[e]=this.#E(t)}this.#b=Object.assign(this.#b,c),this.#w=!0}#E(t){const s=t.groups.prefix,r=t.groups.placeholder,l=Object.assign({},this.#b),u=new g(t.groups.content,l);switch(s){case d.CONDITIONAL:return s=>new e(()=>{const e=this.#f(r,s),n=!e||Object.hasOwn(e,"length")&&0===e.length||"object"==typeof e&&0===Object.keys(e).length,i=t.groups.operator===w;return n&&i||!n&&!i},u,new c(""));case d.REPEATING:return()=>{const t=r.split(n),e=t.at(0),s=r.includes(n)?t.at(1):"";return new i(e,u,t=>t,s)};case d.TAB_INDENTED:case d.SPACE_INDENTED:return()=>{const t=r.includes(n)?parseInt(r.split(n).at(1)):0;return new a(u,s===d.TAB_INDENTED?h.TAB:h.SPACE,t)};case d.CACHED:return()=>{const t="cached_"+r.split(n).at(0);return Object.hasOwn(this.#b,t)||(this.#b[t]=new o(u)),this.#b[t]};default:throw new SyntaxError('unhandled prefix "'+s+'"')}}}return{Block:t,Composite:class extends t{#O;constructor(t){super(),this.#O=t}render(t){return this.#O.map(e=>e.render(t)).join("")}},Conditional:e,Repeating:i,Simple:c,Callback:class extends t{#j;constructor(t){super(),this.#j=t}render(t){return this.#j(t)}},Cached:o,IndentType:h,Indented:a,Template:g}}();